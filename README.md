# Real Estate Simulation (原 Oasis 东莞房产市场仿真系统)

这是一个基于人工智能代理（AI Agent）的东莞房地产市场仿真系统。系统中的每一个买家和卖家都有自己独特的背景故事、职业和财务状况，他们会像真人一样思考、谈判并进行房产交易。

______________________________________________________________________

## 📂 项目结构说明 (Project Structure)

为了让项目保持整洁，我们将文件分成了几个核心部分。

### 1. 核心运行代码 (根目录)

这些是让程序跑起来的最关键文件：

- **`simulation_runner.py`** 🟢 **【主程序入口】**
  - 这是您每次运行仿真的起点。直接运行它，整个虚拟世界就会开始运转。
- **`generate_simulation_report.py`**
  - 负责在仿真结束后自动写报告（生成 Excel 数据和 Markdown 分析文档）。
- **`agent_behavior.py`**
  - **“大脑”**：通过 DeepSeek 大模型控制 Agent 的思考、性格生成和决策逻辑。
- **`transaction_engine.py`**
  - **“交易所”**：处理挂牌、匹配买家、讨价还价（谈判）和最终成交的逻辑。
- **`property_initializer.py`**
  - 负责在仿真开始时，生成东莞（A区/B区等）的初始房产数据。
- **`models.py`**
  - 定义了基础数据结构（比如：什么是“人”，什么是“房子”）。

### 2. 文件夹说明

- **`results/`** (运行结果)
  - 每次运行都会在这里生成一个新的文件夹（例如 `results/run_20240214_...`/），归档所有的 CSV 数据表、运行日志和分析结果。
- **`reports/`** (分析报告)
  - 存放生成的 Markdown 格式深度分析报告，如《Agent人物画像》、《谈判记录复盘》等。
- **`docs/`** (文档资料)
  - 存放项目手册、API 文档及开发指南。
- **`config/`** (配置文件)
  - 包含仿真参数配置与 Agent 模板配置。
- **`services/`** (核心服务)
  - 包含所有业务逻辑服务，如市场服务、交易服务、**ReportingService** (新增：负责自动化结案报告) 等。
- **`_archive/`** (归档箱)
  - 存放旧代码。

______________________________________________________________________

## 🚀 新手运行指南 (Quick Start)

### 这个项目怎么跑？

1. **激活环境** (在终端输入):

   ```bash
   ```bash
   conda activate oasis
   pip install -r requirements.txt
   ```

   *(注：前提是您安装好了 Conda 环境)*

1. **开始仿真**:

   ```bash
   python simulation_runner.py
   ```

   *程序会运行一段时间，你会看到终端里不断有买卖交易的信息弹出。*

1. **看结果**:

   - 程序运行结束后，去 `reports/` 文件夹打开 `.md` 文件查看分析报告。
   - 去 `results/` 文件夹查看详细的数据表格。

______________________________________________________________________

## 💾 版本控制与保存指南 (Git Guide)

这部分非常重要！教您如何像游戏存档一样保存您的代码进度，防止文件丢失或改坏。

### 1. 如何保存进度？ (Save)

这分两步：**本地存档**（存自己电脑）和 **云端同步**（存 GitHub）。

#### 🟢 第一步：本地存档 (Commit)

每当您完成一个功能的修改，或者觉得“现在这个版本很棒”时，请执行：

```bash
# 1. 告诉 Git 关注所有文件的变化
git add .

# 2. 存一个档 (引号里写本次修改的备注，比如"修改了Agent购买逻辑")
git commit -m "这里写您的备注"
```

*此时，您的修改已经安全地保存在本地的历史记录里了。*

#### 🔵 第二步：云端同步 (Push)

为了防止电脑坏了，或者想在别的电脑上写代码，将本地存档上传到 GitHub：

```bash
git push
```

*执行后，您在 GitHub 网页上就能看到最新的代码。*

______________________________________________________________________

### 2. 代码改坏了怎么办？ (Reset & Restore)

如果您不小心删错文件，或者新写的代码报错想回到过去，可以使用“悔棋”大法。

#### 🛡️ 情况 A：文件还在修改中，还没 Commit

如果您改乱了某个文件（比如 `models.py`），想让它恢复到上次保存的状态：

```bash
git checkout models.py
```

*(这会丢弃该文件当前未保存的所有修改，慎用！)*

#### �️ 情况 B：已经 Commit 了，想回退到上一个版本

如果您已经存档了，但发现这个版本有重大 bug，想回到上一次存档的状态：

1. 查看历史存档 ID：
   ```bash
   git log --oneline
   # 您会看到类似：
   # a1b2c3d 修改了Agent逻辑  <-- 当前版本
   # e4f5g6h 初始化项目      <-- 上一个版本
   ```
1. 回退（保留代码修改，只是撤销存档动作）：
   ```bash
   git reset --soft HEAD~1
   ```
1. **强力回退**（完全丢弃最新的修改，回到上一个版本，**危险操作**）：
   ```bash
   git reset --hard HEAD~1
   ```

______________________________________________________________________

## 🛠️ 常见问题

- **Q: 为什么 `results` 文件夹里的东西没有上传到 GitHub?**

  - A: 因为我们在 `.gitignore` 文件里忽略了它。为了节省空间，通常不上传运行生成的数据，只上传代码及文档。

- **Q: 遇到 `ModuleNotFoundError` 怎么办？**

  - A: 检查是否激活了环境 (`conda activate oasis`)，或者是否安装了对应的包 (`pip install <包名>`)。

______________________________________________________________________

*Created by the Li Di Team.*
