# ğŸ“˜ æ•°æ®åº“æŸ¥çœ‹æŒ‡å— (æ–°æ‰‹å‹å¥½ç‰ˆ)

## æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨åŒ–è„šæœ¬æŸ¥çœ‹ â­ **å¼ºçƒˆæ¨èæ–°æ‰‹**

### ä½¿ç”¨æ­¥éª¤

1. **æ‰“å¼€ç»ˆç«¯** (åœ¨ VS Code ä¸­æŒ‰ `Ctrl + ~`)

2. **è¿è¡ŒæŸ¥çœ‹è„šæœ¬**:
   ```bash
   python view_database.py
   ```
   
   è„šæœ¬ä¼šè‡ªåŠ¨æ‰¾åˆ°æœ€æ–°çš„ `simulation.db` å¹¶å±•ç¤ºæ‰€æœ‰å…³é”®æ•°æ®ï¼

3. **å¦‚æœéœ€è¦æŸ¥çœ‹ç‰¹å®šæ•°æ®åº“**:
   ```bash
   python view_database.py results/run_20260201_170403/simulation.db
   ```

### ä½ ä¼šçœ‹åˆ°ä»€ä¹ˆï¼Ÿ

è„šæœ¬ä¼šè‡ªåŠ¨å±•ç¤ºï¼š
- âœ… æ‰€æœ‰è¡¨çš„åç§°å’Œè®°å½•æ•°
- âœ… Agent åŸºç¡€ä¿¡æ¯ï¼ˆå§“åã€èŒä¸šã€æ€§æ ¼ï¼‰
- âœ… Agent è´¢åŠ¡çŠ¶å†µï¼ˆæ”¶å…¥ã€ç°é‡‘ã€èµ„äº§ï¼‰
- âœ… **æ¼æ–—ç­›é€‰ç»“æœ**ï¼ˆä» 20 äººç­›é€‰å‡ºçš„æ´»è·ƒä¹°å®¶/å–å®¶ï¼‰
- âœ… LLM å†³ç­–æ—¥å¿—
- âœ… äº¤æ˜“è®°å½•å’Œè°ˆåˆ¤è®°å½•

---

## æ–¹æ³•äºŒï¼šVS Code å¯è§†åŒ–æ‰©å±• â­ **æœ€ç›´è§‚**

### å®‰è£…æ­¥éª¤

1. åœ¨ VS Code ä¸­æ‰“å¼€æ‰©å±•å•†åº— (æŒ‰ `Ctrl + Shift + X`)
2. æœç´¢ **"SQLite Viewer"** æˆ– **"SQLite"**
3. å®‰è£… `alexcvzz.vscode-sqlite` æ‰©å±•

### ä½¿ç”¨æ–¹æ³•

1. åœ¨ VS Code æ–‡ä»¶æ ‘ä¸­æ‰¾åˆ° `results/run_20260201_170403/simulation.db`
2. **å³é”®ç‚¹å‡»** â†’ é€‰æ‹© **"Open Database"**
3. ä¼šæ‰“å¼€ä¸€ä¸ªå¯è§†åŒ–ç•Œé¢ï¼Œå¯ä»¥ï¼š
   - ğŸ“‹ **æµè§ˆæ‰€æœ‰è¡¨** (å·¦ä¾§åˆ—è¡¨)
   - ğŸ‘ï¸ **ç‚¹å‡»è¡¨åæŸ¥çœ‹æ•°æ®** (è‡ªåŠ¨æ˜¾ç¤ºå‰ 100 è¡Œ)
   - ğŸ” **æ‰§è¡Œ SQL æŸ¥è¯¢** (å³ä¾§æŸ¥è¯¢çª—å£)

---

## æ–¹æ³•ä¸‰ï¼šå‘½ä»¤è¡ŒæŸ¥è¯¢ (é€‚åˆæœ‰ SQL åŸºç¡€çš„ç”¨æˆ·)

### å¸¸ç”¨æŸ¥è¯¢å‘½ä»¤

#### 1. **æ‰“å¼€æ•°æ®åº“**
```bash
sqlite3 results/run_20260201_170403/simulation.db
```

#### 2. **æŸ¥çœ‹æ‰€æœ‰è¡¨**
```sql
.tables
```

#### 3. **æŸ¥çœ‹æŸå¼ è¡¨çš„ç»“æ„**
```sql
.schema agents_static
```

#### 4. **æŸ¥è¯¢æ•°æ®ç¤ºä¾‹**

##### æŸ¥çœ‹æ‰€æœ‰ Agent çš„åŸºæœ¬ä¿¡æ¯
```sql
SELECT agent_id, name, occupation, investment_style 
FROM agents_static 
LIMIT 10;
```

##### æŸ¥çœ‹æ´»è·ƒå‚ä¸è€…ï¼ˆæ¼æ–—ç»“æœï¼‰
```sql
SELECT a.name, p.role, p.life_pressure
FROM active_participants p
JOIN agents_static a ON p.agent_id = a.agent_id;
```

##### æŸ¥çœ‹äº¤æ˜“è®°å½•
```sql
SELECT t.month, 
       buyer.name AS buyer_name, 
       seller.name AS seller_name,
       t.price
FROM transactions t
JOIN agents_static buyer ON t.buyer_id = buyer.agent_id
JOIN agents_static seller ON t.seller_id = seller.agent_id;
```

##### æŸ¥çœ‹ LLM å†³ç­–æ—¥å¿—
```sql
SELECT a.name, d.event_type, d.decision
FROM decision_logs d
JOIN agents_static a ON d.agent_id = a.agent_id
LIMIT 10;
```

#### 5. **ç¾åŒ–è¾“å‡º**
```sql
.mode column
.headers on
.width 5 15 20 15
```

#### 6. **é€€å‡º**
```sql
.quit
```

---

## ğŸ’¡ é’ˆå¯¹æ‚¨å…³å¿ƒçš„é—®é¢˜

### â“ "æ¼æ–—å¼æ•°æ®æµæ˜¯å¦å®ç°ï¼Ÿ"

**éªŒè¯æ–¹æ³•**:

1. è¿è¡Œ `python view_database.py`
2. æŸ¥çœ‹è¾“å‡ºä¸­çš„è¿™ä¸€æ®µï¼š
   ```
   ã€3ã€‘ active_participants (æ´»è·ƒå‚ä¸è€… - æ¼æ–—ç¬¬ä¸‰å±‚) â­
   ğŸ’¡ æ¼æ–—ç­›é€‰ç»“æœ: ä» 20 äºº â†’ 12 äººæ¿€æ´»
   ```

**è§£è¯»**:
- **ç¬¬ä¸€å±‚ (äººå£æ± )**: `agents_static` æœ‰ 20 æ¡è®°å½• â†’ å…¨éƒ¨äººå£
- **ç¬¬äºŒå±‚ (è§‚å¯Ÿè€…æ± )**: SQL æ ¹æ®è´¢åŠ¡èƒ½åŠ›ç­›é€‰ â†’ ç¬¦åˆæ¡ä»¶çš„å€™é€‰äºº
- **ç¬¬ä¸‰å±‚ (äº¤æ˜“æ± )**: `active_participants` æœ‰ 12 æ¡è®°å½• â†’ æœ€ç»ˆæ¿€æ´»çš„ä¹°å®¶/å–å®¶

âœ… **å¦‚æœ `active_participants` çš„æ•°é‡ < `agents_static`ï¼Œå°±è¯´æ˜æ¼æ–—ç”Ÿæ•ˆäº†ï¼**

---

### â“ "äº¤æ˜“è®°å½•å¦‚ä½•ï¼Ÿ"

**éªŒè¯æ–¹æ³•**:

1. è¿è¡ŒæŸ¥è¯¢:
   ```bash
   sqlite3 results/run_20260201_170403/simulation.db "SELECT * FROM transactions;"
   ```

2. æˆ–ç”¨è„šæœ¬æŸ¥çœ‹ `ã€5ã€‘ transactions` éƒ¨åˆ†

**å¯èƒ½çš„ç»“æœ**:
- **æœ‰äº¤æ˜“**: ä¼šæ˜¾ç¤ºä¹°å®¶ã€å–å®¶ã€æˆäº¤ä»·
- **æ— äº¤æ˜“**: "âš ï¸ æ— äº¤æ˜“è®°å½• (å¯èƒ½æ˜¯æ¨¡æ‹Ÿæ—¶é—´å¤ªçŸ­æˆ–å¸‚åœºå†·æ¸…)"

---

## ğŸ¯ å¿«é€Ÿè¯Šæ–­è„šæœ¬

å¦‚æœåªæƒ³å¿«é€Ÿæ£€æŸ¥æ ¸å¿ƒæŒ‡æ ‡ï¼š

```bash
sqlite3 results/run_20260201_170403/simulation.db << EOF
.mode column
.headers on

SELECT 'æ€»äººå£' AS æŒ‡æ ‡, COUNT(*) AS æ•°å€¼ FROM agents_static
UNION ALL
SELECT 'æ¿€æ´»ä¹°å®¶/å–å®¶', COUNT(*) FROM active_participants
UNION ALL
SELECT 'LLMå†³ç­–æ¬¡æ•°', COUNT(*) FROM decision_logs
UNION ALL
SELECT 'æˆåŠŸäº¤æ˜“', COUNT(*) FROM transactions
UNION ALL
SELECT 'æˆåŠŸè°ˆåˆ¤', COUNT(*) FROM negotiations WHERE success=1;
EOF
```

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: è¿è¡Œè„šæœ¬æç¤ºæ‰¾ä¸åˆ°æ¨¡å—ï¼Ÿ
A: ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼Œæˆ–æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ:
```bash
cd D:\GitProj\oasis-main
.\.venv\Scripts\activate  # Windows
python view_database.py
```

### Q: çœ‹åˆ°çš„æ•°æ®å’Œé…ç½®ä¸ç¬¦ï¼Ÿ
A: ç¡®è®¤æ•°æ®åº“è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œä½¿ç”¨ï¼š
```bash
python view_database.py results/run_20260201_170403/simulation.db
```

### Q: æƒ³æ·±å…¥ç ”ç©¶æŸä¸ªè¡¨ï¼Ÿ
A: ä½¿ç”¨ VS Code çš„ SQLite Viewer æ‰©å±•ï¼Œå¯ä»¥ç‚¹å‡»ã€æ’åºã€ç­›é€‰æ•°æ®ï¼Œéå¸¸ç›´è§‚ï¼

---

**æ¨èæ–°æ‰‹è·¯å¾„**: æ–¹æ³•ä¸€ (è„šæœ¬) â†’ æ–¹æ³•äºŒ (VS Code æ‰©å±•) â†’ æ–¹æ³•ä¸‰ (SQL å‘½ä»¤)
